<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 1000">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 28px; font-weight: bold; fill: #2c3e50; }
      .section-title { font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; fill: #34495e; }
      .component-title { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #2c3e50; }
      .component-text { font-family: Arial, sans-serif; font-size: 12px; fill: #555; }
      .label-text { font-family: Arial, sans-serif; font-size: 11px; fill: #666; }
      .arrow-text { font-family: Arial, sans-serif; font-size: 10px; fill: #7f8c8d; }
      
      .client-box { fill: #e8f4f8; stroke: #3498db; stroke-width: 2; }
      .backend-box { fill: #fef5e7; stroke: #f39c12; stroke-width: 2; }
      .data-box { fill: #eafaf1; stroke: #27ae60; stroke-width: 2; }
      .external-box { fill: #fdeaea; stroke: #e74c3c; stroke-width: 2; }
      .storage-box { fill: #f4ecf7; stroke: #8e44ad; stroke-width: 2; }
      
      .connector { fill: none; stroke: #95a5a6; stroke-width: 2; }
      .connector-bold { fill: none; stroke: #34495e; stroke-width: 3; }
      .arrow-marker { fill: #95a5a6; }
      .arrow-marker-bold { fill: #34495e; }
    </style>
    
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" class="arrow-marker" />
    </marker>
    <marker id="arrowhead-bold" markerWidth="12" markerHeight="12" refX="11" refY="3" orient="auto">
      <polygon points="0 0, 12 3, 0 6" class="arrow-marker-bold" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="700" y="40" text-anchor="middle" class="title">Daily Insight - System Architecture</text>
  
  <!-- ========== CLIENT LAYER ========== -->
  <text x="100" y="90" class="section-title">Client Layer</text>
  
  <!-- Android Mobile Client -->
  <rect x="80" y="110" width="220" height="140" rx="8" class="client-box"/>
  <text x="190" y="135" text-anchor="middle" class="component-title">Android Mobile App</text>
  <text x="100" y="160" class="component-text">• Kotlin + Android SDK</text>
  <text x="100" y="180" class="component-text">• Bottom Navigation UI</text>
  <text x="100" y="200" class="component-text">• Stock Visualization</text>
  <text x="100" y="220" class="component-text">• User Portfolio Mgmt</text>
  <text x="100" y="240" class="component-text">• MPAndroidChart</text>

  <!-- ========== BACKEND LAYER ========== -->
  <text x="100" y="310" class="section-title">Backend Layer</text>
  
  <!-- Django API Server -->
  <rect x="80" y="330" width="220" height="240" rx="8" class="backend-box"/>
  <text x="190" y="355" text-anchor="middle" class="component-title">Django REST API Server</text>
  <text x="100" y="380" class="label-text">Apps:</text>
  <text x="100" y="400" class="component-text">• User Management</text>
  <text x="100" y="420" class="component-text">• Market Index Service</text>
  <text x="100" y="440" class="component-text">• Articles Service</text>
  <text x="100" y="460" class="component-text">• API Service</text>
  <text x="100" y="480" class="component-text">• Finance Data Service</text>
  <text x="100" y="500" class="label-text">Features:</text>
  <text x="100" y="520" class="component-text">• JWT Authentication</text>
  <text x="100" y="540" class="component-text">• Recommendation Engine</text>
  <text x="100" y="560" class="component-text">• Cache Management</text>

  <!-- Web Crawlers -->
  <rect x="340" y="330" width="220" height="240" rx="8" class="backend-box"/>
  <text x="450" y="355" text-anchor="middle" class="component-title">Web Crawlers</text>
  <text x="360" y="380" class="label-text">Price & Financial Crawler:</text>
  <text x="360" y="400" class="component-text">• Stock Price Data</text>
  <text x="360" y="420" class="component-text">• Financial Statements</text>
  <text x="360" y="440" class="component-text">• Parquet Format</text>
  <text x="360" y="465" class="label-text">Market Index Crawler:</text>
  <text x="360" y="485" class="component-text">• KOSPI/KOSDAQ Data</text>
  <text x="360" y="505" class="component-text">• Real-time Updates</text>
  <text x="360" y="530" class="label-text">Articles Crawler:</text>
  <text x="360" y="550" class="component-text">• News Articles (Top 50+)</text>

  <!-- LLM Service -->
  <rect x="600" y="330" width="220" height="140" rx="8" class="backend-box"/>
  <text x="710" y="355" text-anchor="middle" class="component-title">LLM Service</text>
  <text x="620" y="380" class="component-text">• Article Summarization</text>
  <text x="620" y="400" class="component-text">• Financial Overview</text>
  <text x="620" y="420" class="component-text">• LLM Caller Module</text>
  <text x="620" y="440" class="component-text">• Content Generation</text>
  <text x="620" y="460" class="component-text">for Personalization</text>

  <!-- ========== DATA LAYER ========== -->
  <text x="100" y="630" class="section-title">Data & Storage Layer</text>
  
  <!-- MySQL Database -->
  <rect x="80" y="650" width="180" height="140" rx="8" class="data-box"/>
  <text x="170" y="675" text-anchor="middle" class="component-title">MySQL Database</text>
  <text x="100" y="700" class="label-text">Tables:</text>
  <text x="100" y="720" class="component-text">• Users & Profiles</text>
  <text x="100" y="740" class="component-text">• User Portfolios</text>
  <text x="100" y="760" class="component-text">• User Preferences</text>
  <text x="100" y="780" class="component-text">• Session Data</text>

  <!-- AWS S3 Storage -->
  <rect x="290" y="650" width="180" height="140" rx="8" class="storage-box"/>
  <text x="380" y="675" text-anchor="middle" class="component-title">AWS S3 Storage</text>
  <text x="310" y="700" class="label-text">Buckets:</text>
  <text x="310" y="720" class="component-text">• Financial Data</text>
  <text x="310" y="740" class="component-text">  (Parquet files)</text>
  <text x="310" y="760" class="component-text">• Article Archives</text>
  <text x="310" y="780" class="component-text">• Market Snapshots</text>

  <!-- Cache Layer -->
  <rect x="500" y="650" width="180" height="140" rx="8" class="data-box"/>
  <text x="590" y="675" text-anchor="middle" class="component-title">Cache Layer</text>
  <text x="520" y="700" class="label-text">Django LocMem Cache:</text>
  <text x="520" y="720" class="component-text">• Finance DataFrames</text>
  <text x="520" y="740" class="component-text">• Profile Data</text>
  <text x="520" y="760" class="component-text">• API Responses</text>

  <!-- ========== EXTERNAL SERVICES ========== -->
  <text x="900" y="90" class="section-title">External Services</text>
  
  <!-- Financial Data Sources -->
  <rect x="880" y="110" width="200" height="100" rx="8" class="external-box"/>
  <text x="980" y="135" text-anchor="middle" class="component-title">Financial Data APIs</text>
  <text x="900" y="160" class="component-text">• Stock Market APIs</text>
  <text x="900" y="180" class="component-text">• Real-time Quotes</text>
  <text x="900" y="200" class="component-text">• Historical Data</text>

  <!-- News Sources -->
  <rect x="880" y="240" width="200" height="100" rx="8" class="external-box"/>
  <text x="980" y="265" text-anchor="middle" class="component-title">News Sources</text>
  <text x="900" y="290" class="component-text">• Financial News Sites</text>
  <text x="900" y="310" class="component-text">• Business Sections</text>
  <text x="900" y="330" class="component-text">• Top Articles</text>

  <!-- LLM Provider -->
  <rect x="880" y="370" width="200" height="80" rx="8" class="external-box"/>
  <text x="980" y="395" text-anchor="middle" class="component-title">LLM Provider</text>
  <text x="900" y="420" class="component-text">• AI Model API</text>
  <text x="900" y="440" class="component-text">• Text Generation</text>

  <!-- AWS Infrastructure -->
  <rect x="880" y="630" width="200" height="160" rx="8" class="storage-box"/>
  <text x="980" y="655" text-anchor="middle" class="component-title">AWS Infrastructure</text>
  <text x="900" y="680" class="label-text">Services:</text>
  <text x="900" y="700" class="component-text">• EC2 (Backend Server)</text>
  <text x="900" y="720" class="component-text">• RDS (MySQL)</text>
  <text x="900" y="740" class="component-text">• S3 (Object Storage)</text>
  <text x="900" y="760" class="component-text">• Lambda (Optional)</text>
  <text x="900" y="780" class="component-text">• CloudWatch</text>

  <!-- ========== CONNECTIONS ========== -->
  
  <!-- Client to Backend API -->
  <path d="M 190 250 L 190 330" class="connector-bold" marker-end="url(#arrowhead-bold)"/>
  <text x="200" y="290" class="arrow-text">REST API</text>
  
  <!-- Backend to MySQL -->
  <path d="M 190 570 L 170 650" class="connector" marker-end="url(#arrowhead)"/>
  <text x="140" y="610" class="arrow-text">ORM</text>
  
  <!-- Backend to S3 -->
  <path d="M 250 570 L 340 650" class="connector" marker-end="url(#arrowhead)"/>
  <text x="280" y="610" class="arrow-text">boto3</text>
  
  <!-- Backend to Cache -->
  <path d="M 300 520 L 500 700" class="connector" marker-end="url(#arrowhead)"/>
  <text x="380" y="600" class="arrow-text">read/write</text>
  
  <!-- Backend to LLM Service -->
  <path d="M 300 400 L 600 400" class="connector" marker-end="url(#arrowhead)"/>
  <text x="430" y="395" class="arrow-text">API call</text>
  
  <!-- Crawlers to S3 -->
  <path d="M 450 570 L 380 650" class="connector" marker-end="url(#arrowhead)"/>
  <text x="380" y="610" class="arrow-text">upload</text>
  
  <!-- Crawlers to Financial APIs -->
  <path d="M 560 380 L 880 150" class="connector" marker-end="url(#arrowhead)"/>
  <text x="700" y="250" class="arrow-text">scrape</text>
  
  <!-- Crawlers to News Sources -->
  <path d="M 560 450 L 880 290" class="connector" marker-end="url(#arrowhead)"/>
  <text x="700" y="360" class="arrow-text">scrape</text>
  
  <!-- LLM Service to LLM Provider -->
  <path d="M 820 400 L 880 410" class="connector" marker-end="url(#arrowhead)"/>
  <text x="830" y="395" class="arrow-text">API</text>
  
  <!-- S3 to AWS -->
  <path d="M 470 720 L 880 720" class="connector" marker-end="url(#arrowhead)"/>
  
  <!-- MySQL to AWS RDS -->
  <path d="M 260 720 L 880 720" class="connector" marker-end="url(#arrowhead)"/>
  
  <!-- Backend to AWS EC2 -->
  <path d="M 300 450 L 880 690" class="connector" marker-end="url(#arrowhead)"/>
  <text x="550" y="560" class="arrow-text">hosted on</text>

  <!-- ========== LEGEND ========== -->
  <text x="100" y="850" class="section-title">Legend</text>
  
  <rect x="100" y="865" width="50" height="25" rx="4" class="client-box"/>
  <text x="160" y="882" class="label-text">Client</text>
  
  <rect x="240" y="865" width="50" height="25" rx="4" class="backend-box"/>
  <text x="300" y="882" class="label-text">Backend</text>
  
  <rect x="380" y="865" width="50" height="25" rx="4" class="data-box"/>
  <text x="440" y="882" class="label-text">Database</text>
  
  <rect x="540" y="865" width="50" height="25" rx="4" class="storage-box"/>
  <text x="600" y="882" class="label-text">Storage/Cloud</text>
  
  <rect x="720" y="865" width="50" height="25" rx="4" class="external-box"/>
  <text x="780" y="882" class="label-text">External</text>

  <!-- ========== DATA FLOW NOTES ========== -->
  <rect x="100" y="910" width="680" height="80" rx="8" fill="#f8f9fa" stroke="#dee2e6" stroke-width="1"/>
  <text x="120" y="935" class="component-title">Data Flow:</text>
  <text x="120" y="955" class="component-text">1. Crawlers fetch data from external sources and store in S3</text>
  <text x="120" y="972" class="component-text">2. Backend API processes data from S3/MySQL and serves to mobile client</text>
  
  <!-- System Info -->
  <text x="900" y="935" class="label-text">Tech Stack:</text>
  <text x="900" y="955" class="component-text">• Django 5.2 + Python</text>
  <text x="900" y="972" class="component-text">• Android (Kotlin)</text>
  <text x="1050" y="955" class="component-text">• MySQL 8.0</text>
  <text x="1050" y="972" class="component-text">• AWS Services</text>
</svg>